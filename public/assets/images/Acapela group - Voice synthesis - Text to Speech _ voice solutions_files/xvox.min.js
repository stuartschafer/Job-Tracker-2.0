function getXmlHttpRequest(){var e=null;return window.XDomainRequest?(vocalisation.ieRequest=!0,vocalisation.currentProtocol="http://",vocalisation.currentRouteHL="plainTextHL",e=new XDomainRequest):window.XMLHttpRequest?e=new XMLHttpRequest:(vocalisation.ieRequest=!0,vocalisation.currentProtocol="http://",vocalisation.currentRouteHL="plainTextHL",e=new ActiveXObject("Microsoft.XMLHTTP")),e}function Voxi_Audio_timeupdate(){if(1!=vocalisation.inPause&&0!=vocalisation.onPlay){var e=new Date,o=0;o=null!=vocalisation.currentTime?e.getTime()-vocalisation.currentTime.getTime():0;var t=parseFloat(o/1e3)-vocalisation.totalPause;if((t+vocalisation.ctime)/vocalisation.totalSoundDuration*100<=100&&(document.getElementById("voxi_time_play").style.width=(t+vocalisation.ctime)/vocalisation.totalSoundDuration*100+"%"),void 0!==vocalisation.silences[vocalisation.globalTabLive][(vocalisation.indexWord,vocalisation.indexWord)]){if(t>=vocalisation.silences[vocalisation.globalTabLive][(vocalisation.indexWord,vocalisation.indexWord)].posSound){if(vocalisation.nextNode&&(vocalisation.nextNode=!1,vocalisation.sentences[vocalisation.index_silence].Node.replaceChild(vocalisation.sentences[vocalisation.index_silence].Son,vocalisation.sentences[vocalisation.index_silence].Node.childNodes[vocalisation.savedNode]),vocalisation.index_silence++,void 0!==vocalisation.sentences[vocalisation.index_silence]&&(vocalisation.wordNum=vocalisation.sentences[vocalisation.index_silence].Words.length),vocalisation.indexNew=0),void 0!==vocalisation.sentences[vocalisation.index_silence])for(var l=vocalisation.sentences[vocalisation.index_silence].Node.childNodes,a=0;a<l.length;a++)if(l[a]==vocalisation.sentences[vocalisation.index_silence].Son){vocalisation.savedNode=a,void 0!==vocalisation.sentences[vocalisation.index_silence].Words&&(vocalisation.sentences[vocalisation.index_silence].Node.replaceChild(vocalisation.sentences[vocalisation.index_silence].Words[vocalisation.indexNew].Node,l[a]),void 0!==(n=document.getElementsByClassName("xvox_current_word_vocalised")[0])&&xvox_apply_color_class(n,"word"),void 0!==(i=document.getElementsByClassName("xvox_current_sentence_vocalised")[0])&&xvox_apply_color_class(i,"sentence"));break}if(vocalisation.indexNew>0&&void 0!==vocalisation.sentences[vocalisation.index_silence].Words[vocalisation.indexNew].Node){vocalisation.sentences[vocalisation.index_silence].Node.replaceChild(vocalisation.sentences[vocalisation.index_silence].Words[vocalisation.indexNew].Node,vocalisation.sentences[vocalisation.index_silence].Words[vocalisation.indexNew-1].Node);var n=document.getElementsByClassName("xvox_current_word_vocalised")[0];void 0!==n&&xvox_apply_color_class(n,"word");var i=document.getElementsByClassName("xvox_current_sentence_vocalised")[0];void 0!==i&&xvox_apply_color_class(i,"sentence")}vocalisation.indexWord++,vocalisation.indexNew++}vocalisation.indexNew>=vocalisation.wordNum&&(vocalisation.nextNode=!0)}}}function xvox_apply_color_class(e,o){"sentence"==o?e.style.backgroundColor=vocalisation.color:"word"==o&&(e.style.backgroundColor=vocalisation.wordColor),e.style.color=vocalisation.textColor,e.style.fontWeight=vocalisation.senOpts.fontWeight,e.style.fontStyle=vocalisation.senOpts.fontStyle,e.style.textDecoration=vocalisation.senOpts.textDecoration}function Voxi_Audio_Play(){if(vocalisation.fullStopped)return vocalisation.fullStopped=!1,void document.getElementById("xvox_listen_link").click();if(null!=document.getElementById("playerHL")&&Voxi_audio_HL_close(),(1==vocalisation.st||0==vocalisation.st&&"sent"!=vocalisation.stat)&&(vocalisation.currentTime=new Date,vocalisation.timeUpdate=setInterval(function(){Voxi_Audio_timeupdate()},vocalisation.intervalTick)),"sent"!=vocalisation.stat&&(vocalisation.stat="sent",send_stat(),void 0!==vocalisation.sentences[vocalisation.index_silence]))for(var e=vocalisation.sentences[vocalisation.index_silence].Node.childNodes,o=0;o<e.length;o++)if(e[o]==vocalisation.sentences[vocalisation.index_silence].Son){if(vocalisation.savedNode=o,void 0!==vocalisation.sentences[vocalisation.index_silence].Words){vocalisation.sentences[vocalisation.index_silence].Node.replaceChild(vocalisation.sentences[vocalisation.index_silence].Words[vocalisation.indexNew].Node,e[o]);var t=document.getElementsByClassName("xvox_current_word_vocalised")[0];void 0!==t&&xvox_apply_color_class(t,"word");var l=document.getElementsByClassName("xvox_current_sentence_vocalised")[0];void 0!==l&&xvox_apply_color_class(l,"sentence")}break}if(1==vocalisation.inPause){vocalisation.Resume=new Date;var a=parseFloat((vocalisation.Resume.getTime()-vocalisation.timePause.getTime())/1e3);vocalisation.totalPause+=a}1==vocalisation.onPlay?(vocalisation.onPlay=!1,Voxi_Audio_Pause()):(vocalisation.inPause=!1,vocalisation.st=!1,vocalisation.onPlay=!0,document.getElementById("xvox_audio_player").play(),document.getElementById("play_img").src=vocalisation.playerImgs.pause,document.getElementById("play_img").setAttribute("alt","Mettre l'écoute en pause"),document.getElementById("play").setAttribute("title","Mettre l'écoute en pause"))}function Voxi_Audio_Pause(){vocalisation.inPause=!0,vocalisation.timePause=new Date,document.getElementById("xvox_audio_player").pause(),document.getElementById("play_img").src=vocalisation.playerImgs.play,document.getElementById("play_img").setAttribute("alt","Ecoutez l'article"),document.getElementById("play").setAttribute("title","Ecoutez l'article")}function Voxi_Audio_Stop(){vocalisation.onPlay=!1,vocalisation.st=!0,vocalisation.inPause=!1,vocalisation.totalPause=0,vocalisation.timePause=null,vocalisation.Resume=null,document.getElementById("xvox_audio_player").pause(),0!=document.getElementById("xvox_audio_player").currentTime&&(document.getElementById("xvox_audio_player").currentTime=0),vocalisation.currentTime=null,document.getElementById("voxi_time_play").style.width="0%",clearInterval(vocalisation.timeUpdate),document.getElementById("play_img").src=vocalisation.playerImgs.play,document.getElementById("play_img").setAttribute("alt","Ecoutez l'article"),document.getElementById("play").setAttribute("title","Ecoutez l'article"),void 0!==vocalisation.sentences[vocalisation.index_silence]&&vocalisation.sentences[vocalisation.index_silence].Node.replaceChild(vocalisation.sentences[vocalisation.index_silence].Son,vocalisation.sentences[vocalisation.index_silence].Node.childNodes[vocalisation.savedNode]),vocalisation.index_silence=0,vocalisation.lastIndexSilence=0,vocalisation.indexWord=0,vocalisation.indexNew=0,vocalisation.nextNode=!1,vocalisation.onPlay=!1,vocalisation.countW=0,vocalisation.wordNum=0,vocalisation.savedNode=0,vocalisation.ctime=0,vocalisation.currentSequence=0,vocalisation.globalTabLive=0,vocalisation.tabLivesIndex=0,vocalisation.currentTime=new Date,vocalisation.liveVocIndex=0,vocalisation.isStopped=!1,vocalisation.totalSoundDuration=0,vocalisation.totalSoundDurationReal=0,vocalisation.lastNodeOpen=null,vocalisation.sequenceNumber=0,vocalisation.fullStopped=!0;for(var e=0;e<vocalisation.xvox_requests.length;e++)vocalisation.xvox_requests[e].abort();vocalisation.tabLives=[],vocalisation.silences=[],vocalisation.xvox_requests=[],void 0!==vocalisation.sentences[vocalisation.index_silence]&&(vocalisation.wordNum=vocalisation.sentences[vocalisation.index_silence].Words.length)}function Voxi_Audio_Manage(){var e=document.getElementById(vocalisation.currentPlayer);"none"==e.style.display||""==e.style.display?(document.getElementById(vocalisation.currentPlayer).style.display="block",xvox_live_voc("hl")):Voxi_Audio_Play()}function Voxi_audio_HL_Play(){1==vocalisation.onPlay&&Voxi_Audio_Stop(),document.getElementById("playerHL").play()}function Voxi_audio_HL_Pause(){document.getElementById("playerHL").pause()}function Voxi_audio_HL_Stop(){var e=document.getElementById("playerHL");e.pause(),0!=e.currentTime&&(e.currentTime=0),vocalisation.index_silence=0}function Voxi_audio_HL_close(){Voxi_audio_HL_Stop(),document.getElementById("vhi").style.display="none",document.getElementById("phldiv").style.display="none"}function xvox_sel_elem_to_voc(e,o,t){"sentence"==o?vocalisation.vocaliseSentence?(vocalisation.lastColorVoc=vocalisation.color,vocalisation.color=e,xvox_has_class(t,"selectedColor")&&xvox_remove_class_name(t,"selectedColor"),t.setAttribute("aria-selected","true"),vocalisation.vocaliseSentence=!1):(xvox_has_class(t,"selectedColor")||(t.className+=" selectedColor"),vocalisation.color=vocalisation.lastColorVoc,t.setAttribute("aria-selected","false"),vocalisation.vocaliseSentence=!0):"word"==o?vocalisation.vocaliseWord?(vocalisation.lastColorVocWord=vocalisation.wordColor,vocalisation.wordColor=e,xvox_has_class(t,"selectedColor")&&xvox_remove_class_name(t,"selectedColor"),t.setAttribute("aria-selected","true"),vocalisation.vocaliseWord=!1):(xvox_has_class(t,"selectedColor")||(t.className+=" selectedColor"),vocalisation.wordColor=vocalisation.lastColorVocWord,t.setAttribute("aria-selected","false"),vocalisation.vocaliseWord=!0):"text"==o&&(null!=vocalisation.currentTexColored?(xvox_remove_class_name(vocalisation.currentTexColored,"selectedColor"),vocalisation.currentTexColored.setAttribute("aria-selected","false")):(xvox_remove_class_name(document.getElementById("firstSurbColTe"),"selectedColor"),document.getElementById("firstSurbColTe").setAttribute("aria-selected","false")),t.className+="selectedColor",t.setAttribute("aria-selected","true"),vocalisation.currentTexColored=t,vocalisation.textColor=e)}function xvox_sel_color(e,o,t){if("sentence"==o)null!=vocalisation.currentSenColored?(xvox_remove_class_name(vocalisation.currentSenColored,"selectedColor"),vocalisation.currentSenColored.setAttribute("aria-selected","false")):(xvox_remove_class_name(document.getElementById("firstSurbColSe"),"selectedColor"),document.getElementById("firstSurbColSe").setAttribute("aria-selected","false")),t.className+="selectedColor",t.setAttribute("aria-selected","true"),vocalisation.currentSenColored=t,vocalisation.savedSentenceColor=vocalisation.color,vocalisation.color=e;else if("word"==o){if(null!=vocalisation.currentWorColored?(xvox_remove_class_name(vocalisation.currentWorColored,"selectedColor"),vocalisation.currentWorColored.setAttribute("aria-selected","false")):(xvox_remove_class_name(document.getElementById("firstSurbColWo"),"selectedColor"),document.getElementById("firstSurbColWo").setAttribute("aria-selected","false")),t.className+="selectedColor",t.setAttribute("aria-selected","true"),!vocalisation.vocaliseWord){var l=document.getElementById("xvWordButton");xvox_has_class(l,"selectedColor")||(l.className+=" selectedColor"),l.setAttribute("aria-selected","true"),vocalisation.vocaliseWord=!0}vocalisation.currentWorColored=t,vocalisation.lastColorVocWord=vocalisation.wordColor,vocalisation.savedWordColor=vocalisation.wordColor,vocalisation.wordColor=e}else"text"==o&&(null!=vocalisation.currentTexColored?(xvox_remove_class_name(vocalisation.currentTexColored,"selectedColor"),vocalisation.currentTexColored.setAttribute("aria-selected","false")):(xvox_remove_class_name(document.getElementById("firstSurbColTe"),"selectedColor"),document.getElementById("firstSurbColTe").setAttribute("aria-selected","false")),t.className+="selectedColor",t.setAttribute("aria-selected","true"),vocalisation.currentTexColored=t,vocalisation.savedTextColor=vocalisation.textColor,vocalisation.textColor=e)}function xvox_set_options(e){"bold"==e?("normal"!=vocalisation.senOpts.fontStyle&&xvox_remove_class_name(document.getElementById("surbItalElem"),"selectedColor"),"normal"==vocalisation.senOpts.fontWeight?(document.getElementById("surbBoldElem").className+="selectedColor",vocalisation.senOpts.fontWeight=e,vocalisation.senOpts.fontStyle="normal"):(xvox_remove_class_name(document.getElementById("surbBoldElem"),"selectedColor"),vocalisation.senOpts.fontWeight="normal")):"italic"==e?("normal"!=vocalisation.senOpts.fontWeight&&xvox_remove_class_name(document.getElementById("surbBoldElem"),"selectedColor"),"normal"==vocalisation.senOpts.fontStyle?(vocalisation.senOpts.fontStyle=e,vocalisation.senOpts.fontWeight="normal",document.getElementById("surbItalElem").className+="selectedColor"):(xvox_remove_class_name(document.getElementById("surbItalElem"),"selectedColor"),vocalisation.senOpts.fontStyle="normal")):"underline"==e&&("none"==vocalisation.senOpts.textDecoration?(vocalisation.senOpts.textDecoration=e,document.getElementById("surbUnderElem").className+="selectedColor"):(xvox_remove_class_name(document.getElementById("surbUnderElem"),"selectedColor"),vocalisation.senOpts.textDecoration="none"))}function xvox_show_highlight_menu(){var e=document.getElementById("voxi_highlight_ul"),o=document.getElementById("voxi_speed_ul"),t=document.getElementById("voxi_voice_ul"),l=document.getElementById("voxi_volume_ul"),a=document.getElementById("voxi_highlight_pop"),n=document.getElementById("voxi_volume_pop"),i=document.getElementById("voxi_voice_pop"),s=document.getElementById("voxi_speed_pop");"none"==e.style.display||""==e.style.display?(e.style.display="block",a.setAttribute("aria-expanded","true"),a.setAttribute("title","Cacher les paramètres de surbrillance"),xvox_has_class(a,"xvox_sel_menu")||(a.className+="xvox_sel_menu"),"none"!=l.style.display&&""!=l.style.display&&(l.style.display="none",n.setAttribute("aria-expanded","false"),n.setAttribute("title","Afficher les paramètres de gestion du volume"),xvox_remove_class_name(n,"xvox_sel_menu")),"none"!=o.style.display&&""!=o.style.display&&(o.style.display="none",s.setAttribute("aria-expanded","false"),s.setAttribute("title","Afficher les paramètres de surbrillance"),xvox_remove_class_name(s,"xvox_sel_menu")),"none"!=t.style.display&&""!=t.style.display&&(t.style.display="none",i.setAttribute("aria-expanded","false"),i.setAttribute("title","Afficher les paramètres de surbrillance"),xvox_remove_class_name(i,"xvox_sel_menu"))):(e.style.display="none",a.setAttribute("aria-expanded","false"),a.setAttribute("title","Afficher les paramètres de surbrillance"),xvox_remove_class_name(a,"xvox_sel_menu"))}function xvox_show_speed_menu(){var e=document.getElementById("voxi_highlight_ul"),o=document.getElementById("voxi_speed_ul"),t=document.getElementById("voxi_voice_ul"),l=document.getElementById("voxi_volume_ul"),a=document.getElementById("voxi_highlight_pop"),n=document.getElementById("voxi_speed_pop"),i=document.getElementById("voxi_voice_pop"),s=document.getElementById("voxi_volume_pop");"none"==o.style.display||""==o.style.display?(o.style.display="block",n.setAttribute("aria-expanded","true"),n.setAttribute("title","Cacher les paramètres de surbrillance"),xvox_has_class(n,"xvox_sel_menu")||(n.className+="xvox_sel_menu"),"none"!=l.style.display&&""!=l.style.display&&(l.style.display="none",s.setAttribute("aria-expanded","false"),s.setAttribute("title","Afficher les paramètres de gestion du volume"),xvox_remove_class_name(s,"xvox_sel_menu")),"none"!=e.style.display&&""!=e.style.display&&(e.style.display="none",a.setAttribute("aria-expanded","false"),a.setAttribute("title","Afficher les paramètres de surbrillance"),xvox_remove_class_name(a,"xvox_sel_menu")),"none"!=t.style.display&&""!=t.style.display&&(t.style.display="none",i.setAttribute("aria-expanded","false"),i.setAttribute("title","Afficher les paramètres de surbrillance"),xvox_remove_class_name(i,"xvox_sel_menu"))):(o.style.display="none",n.setAttribute("aria-expanded","false"),n.setAttribute("title","Afficher les paramètres de surbrillance"),xvox_remove_class_name(n,"xvox_sel_menu"))}function xvox_show_voice_menu(){var e=document.getElementById("voxi_highlight_ul"),o=document.getElementById("voxi_speed_ul"),t=document.getElementById("voxi_voice_ul"),l=document.getElementById("voxi_volume_ul"),a=document.getElementById("voxi_highlight_pop"),n=document.getElementById("voxi_speed_pop"),i=document.getElementById("voxi_voice_pop"),s=document.getElementById("voxi_volume_pop");"none"==t.style.display||""==t.style.display?(t.style.display="block",i.setAttribute("aria-expanded","true"),i.setAttribute("title","Cacher les paramètres de surbrillance"),xvox_has_class(i,"xvox_sel_menu")||(i.className+="xvox_sel_menu"),"none"!=l.style.display&&""!=l.style.display&&(l.style.display="none",s.setAttribute("aria-expanded","false"),s.setAttribute("title","Afficher les paramètres de gestion du volume"),xvox_remove_class_name(s,"xvox_sel_menu")),"none"!=e.style.display&&""!=e.style.display&&(e.style.display="none",a.setAttribute("aria-expanded","false"),a.setAttribute("title","Afficher les paramètres de surbrillance"),xvox_remove_class_name(a,"xvox_sel_menu")),"none"!=o.style.display&&""!=o.style.display&&(o.style.display="none",n.setAttribute("aria-expanded","false"),n.setAttribute("title","Afficher les paramètres de vitesse"),xvox_remove_class_name(n,"xvox_sel_menu"))):(t.style.display="none",i.setAttribute("aria-expanded","false"),i.setAttribute("title","Afficher les paramètres de voix"),xvox_remove_class_name(i,"xvox_sel_menu"))}function xvox_show_volume_menu(){var e=document.getElementById("voxi_highlight_ul"),o=document.getElementById("voxi_speed_ul"),t=document.getElementById("voxi_voice_ul"),l=document.getElementById("voxi_volume_ul"),a=document.getElementById("voxi_highlight_pop"),n=document.getElementById("voxi_volume_pop"),i=document.getElementById("voxi_voice_pop"),s=document.getElementById("voxi_speed_pop");"none"==l.style.display||""==l.style.display?(l.style.display="block",n.setAttribute("aria-expanded","true"),n.setAttribute("title","Cacher les paramètres de gestion du son"),xvox_has_class(n,"xvox_sel_menu")||(n.className+="xvox_sel_menu"),"none"!=e.style.display&&""!=e.style.display&&(e.style.display="none",a.setAttribute("aria-expanded","false"),a.setAttribute("title","Afficher les paramètres de surbrillance"),xvox_remove_class_name(a,"xvox_sel_menu")),"none"!=o.style.display&&""!=o.style.display&&(o.style.display="none",s.setAttribute("aria-expanded","false"),s.setAttribute("title","Afficher les paramètres de surbrillance"),xvox_remove_class_name(s,"xvox_sel_menu")),"none"!=t.style.display&&""!=t.style.display&&(t.style.display="none",i.setAttribute("aria-expanded","false"),i.setAttribute("title","Afficher les paramètres de surbrillance"),xvox_remove_class_name(i,"xvox_sel_menu"))):(l.style.display="none",n.setAttribute("aria-expanded","false"),n.setAttribute("title","Afficher les paramètres de gestion du son"),xvox_remove_class_name(n,"xvox_sel_menu"))}function xvox_show_menu_player(){var e=document.getElementById("voxi_highlight_pop"),o=document.getElementById("voxi_volume_pop"),t=document.getElementById("voxi_menu");"none"==t.style.display||""==t.style.display?(t.style.display="block",document.getElementById("engine_img").src=vocalisation.playerImgs.engine_hover,document.getElementById("engine").setAttribute("aria-expanded","true"),document.getElementById("engine").setAttribute("title","Cacher les paramètres"),document.getElementById("engine_img").setAttribute("alt","Cacher les paramètres"),document.getElementById("voxi_highlight_pop").focus()):(t.style.display="none",document.getElementById("engine_img").src=vocalisation.playerImgs.engine,document.getElementById("voxi_menu_bg").style.backgroundImage="none",document.getElementById("engine").setAttribute("aria-expanded","false"),document.getElementById("engine").setAttribute("title","Afficher les paramètres"),document.getElementById("engine_img").setAttribute("alt","Afficher les paramètres"),document.getElementById("voxi_highlight_pop").setAttribute("aria-expanded","false"),document.getElementById("voxi_highlight_pop").setAttribute("title","Afficher les paramètres de surbrillance"),document.getElementById("voxi_volume_pop").setAttribute("aria-expanded","false"),document.getElementById("voxi_volume_pop").setAttribute("title","Afficher les paramètres de surbrillance"),xvox_has_class(o,"xvox_sel_menu")&&xvox_remove_class_name(o,"xvox_sel_menu"),xvox_has_class(e,"xvox_sel_menu")&&xvox_remove_class_name(e,"xvox_sel_menu"))}function xvox_has_class(e,o){return e.className.match(new RegExp("(\\s|^)"+o+"(\\s|$)"))}function xvox_remove_class_name(e,o){var t=e.className,l=new RegExp("(^| )"+o+"( |$)");t=(t=t.replace(l,"$1")).replace(/ $/,""),e.className=t}function displayPlayer(){var e=document.getElementById(vocalisation.currentPlayer);"block"!=e.style.display?(e.style.display="block",Voxi_Audio_Play()):e.style.display="none"}function init_player(){var e='<a onclick="Voxi_Audio_Manage()" id="xvox_manage_key_link" accesskey="L"></a>';e+='<audio id="xvox_audio_player">',e+='<source id="mp3_src" src="'+(void 0!==vocalisation.player.source?vocalisation.player.source:vocalisation.defaultAudioFileSrc)+'.mp3" type="audio/mpeg">',e+='<source id="wav_src" src="'+(void 0!==vocalisation.player.source?vocalisation.player.source:vocalisation.defaultAudioFileSrc)+'.wav" type="audio/wav">',e+="</audio>",e+='<div id="voxi_error_div">',e+='<span id="voxi_error_msg"></span>',e+="</div>",e+='<div id="voxi_actions_div">',e+='<img id="xvox_listen_btn" src="'+vocalisation.playerImgs.listen+'" alt="Ecoutez l\'article" />',e+='<button id="play" title="Ecoutez l\'article">',e+='<img id="play_img" class="img_btn_player" src="'+vocalisation.playerImgs.play+'" alt="Ecoutez l\'article">',e+="</button>",e+='<button id="stop" title="Arrêter l\'écoute" alt="Arrêter l\'écoute">',e+='<img id="stop_img" class="img_btn_player" src="'+vocalisation.playerImgs.stop+'" alt="Arrêter l\'écoute">',e+="</button>",e+='<button id="engine" title="Afficher les paramètres" aria-expanded="false">',e+='<img id="engine_img" src="'+vocalisation.playerImgs.engine+'" alt="Afficher les paramètres">',e+="</button>",e+='<div id="voxi_seekbar">',e+='<span id="voxi_loaded"></span>',e+='<span id="voxi_time_play"></span>',e+="</span>",e+="</div>",e+='<button id="close_player" title="Fermer le lecteur"><img src="'+vocalisation.playerImgs.narrow+'" alt="Fermer le lecteur" /> <span class="xvox_span_visually_hidden">Fermer le lecteur</span></button>',e+="</div>",e+='<div id="voxi_menu_bg">',e+='<div id="voxi_menu">',e+='<ul id="voxi_menu_ul">',e+="<li>",e+='<button id="voxi_highlight_pop" aria-expanded="false" title="Afficher les paramètres de surbrillance">Surbrillance</button>',e+='<ul id="voxi_highlight_ul">',e+='<li class="colorSurb">',e+='<ul class="xvox_highlight_sentence_ul">',e+="<li>",e+='<button title="Ecoutez le texte avec la surbrillance des phrases en bleu" onclick="xvox_sel_color(\'#2164A5\', \'sentence\', this);" style="background-color:#2164A5;"><span class="xvox_span_visually_hidden">Ecoutez le texte avec la surbrillance des phrases en bleu</span></button>',e+="</li>",e+="<li>",e+='<button id="firstSurbColSe" class="selectedColor" title="Ecoutez le texte avec la surbrillance des phrases en '+vocalisation.colorDescription+'" onclick="xvox_sel_color(\''+vocalisation.color+"', 'sentence', this);\" style=\"background-color:"+vocalisation.color+';"><span class="xvox_span_visually_hidden">Ecoutez le texte avec la surbrillance des phrases en '+vocalisation.colorDescription+"</span></button>",e+="</li>",e+="<li>",e+='<button title="Ecoutez le texte avec la surbrillance des phrases en bleu clair" onclick="xvox_sel_color(\'#A4CBFF\', \'sentence\', this);" style="background-color:#A4CBFF;"><span class="xvox_span_visually_hidden">Ecoutez le texte avec la surbrillance des phrases en bleu clair</span></button>',e+="</li>",e+="<li>",e+='<button title="Ecoutez le texte avec la surbrillance des phrases en cyan clair" onclick="xvox_sel_color(\'lightcyan\', \'sentence\', this);" style="background-color:lightcyan;"><span class="xvox_span_visually_hidden">Ecoutez le texte avec la surbrillance des phrases en cyan clair</span></button>',e+="</li>",e+="<li>",e+='<button title="Ecoutez le texte avec la surbrillance des phrases en jaune clair" onclick="xvox_sel_color(\'lightyellow\', \'sentence\', this);" style="background-color:lightyellow;"><span class="xvox_span_visually_hidden">Ecoutez le texte avec la surbrillance des phrases en jaune clair</span></button>',e+="</li>",e+='<li aria-hidden="true">',e+='<span id="sentence_highlight_title"><button title="Ecoutez le texte avec les mots en surbrillance" onclick="xvox_sel_elem_to_voc(\'initial\', \'sentence\', this);" class="xvox_elem_to_voc selectedColor">Phrase</button></span>',e+="</li>",e+="</ul>",e+="</li>",e+='<li class="colorSurb">',e+='<ul class="xvox_highlight_sentence_ul">',e+="<li>",e+='<button title="Ecoutez le texte avec la surbrillance des mots en orange foncé" onclick="xvox_sel_color(\'darkorange\', \'word\', this);" style="background-color:darkorange;"><span class="xvox_span_visually_hidden">Ecoutez le texte avec la surbrillance des mots en orange foncé</span></button>',e+="</li>",e+="<li>",e+='<button id="firstSurbColWo" class="selectedColor" title="Ecoutez le texte avec la surbrillance des mots en '+vocalisation.wordColorDescription+'" onclick="xvox_sel_color(\''+vocalisation.wordColor+"', 'word', this);\" style=\"background-color:"+vocalisation.wordColor+';"><span class="xvox_span_visually_hidden">Ecoutez le texte avec la surbrillance des mots en '+vocalisation.wordColorDescription+"</span></button>",e+="</li>",e+="<li>",e+='<button title="Ecoutez le texte avec la surbrillance des mots en rouge" onclick="xvox_sel_color(\'#d73914\', \'word\', this);" style="background-color:#d73914;"><span class="xvox_span_visually_hidden">Ecoutez le texte avec la surbrillance des mots en rouge</span></button>',e+="</li>",e+="<li>",e+='<button title="Ecoutez le texte avec la surbrillance des mots en cyan clair" onclick="xvox_sel_color(\'lightcyan\', \'word\', this);" style="background-color:lightcyan;"><span class="xvox_span_visually_hidden">Ecoutez le texte avec la surbrillance des mots en cyan clair</span></button>',e+="</li>",e+="<li>",e+='<button title="Ecoutez le texte avec la surbrillance des mots en jaune clair" onclick="xvox_sel_color(\'lightyellow\', \'word\', this);" style="background-color:lightyellow;"><span class="xvox_span_visually_hidden">Ecoutez le texte avec la surbrillance des mots en jaune clair</span></button>',e+="</li>",e+='<li aria-hidden="true">',e+='<span id="word_highlight_title"><button id="xvWordButton" title="Ecoutez le texte avec les mots en surbrillance" onclick="xvox_sel_elem_to_voc(\'initial\', \'word\', this);" class="xvox_elem_to_voc selectedColor">Mot</button></span>',e+="</li>",e+="</ul>",e+="</li>",e+='<li class="colorSurb">',e+='<ul class="xvox_highlight_sentence_ul">',e+="<li>",e+='<button title="Ecoutez le texte avec la surbrillance orange foncée" onclick="xvox_sel_color(\'darkorange\', \'text\', this);" style="background-color:darkorange;"><span class="xvox_span_visually_hidden">Ecoutez le texte avec la surbrillance orange foncée</span></button>',e+="</li>",e+="<li>",e+='<button title="Ecoutez le texte avec la surbrillance gris clair" onclick="xvox_sel_color(\'lightgrey\', \'text\', this);" style="background-color:lightgrey;"><span class="xvox_span_visually_hidden">Ecoutez le texte avec la surbrillance gris clair</span></button>',e+="</li>",e+="<li>",e+='<button title="Ecoutez le texte avec la surbrillance bleu clair" onclick="xvox_sel_color(\'rgb(164, 203, 255)\', \'text\', this);" style="background-color:rgb(164, 203, 255);"><span class="xvox_span_visually_hidden">Ecoutez le texte avec la surbrillance bleu clair</span></button>',e+="</li>",e+="<li>",e+='<button id="firstSurbColTe" title="Ecoutez le texte avec la surbrillance blanche" class="selectedColor" onclick="xvox_sel_color(\'white\', \'text\', this);" style="background-color:white;"><span class="xvox_span_visually_hidden">Ecoutez le texte avec la surbrillance blanche</span></button>',e+="</li>",e+="<li>",e+='<button title="Ecoutez le texte avec la surbrillance jaune clair" onclick="xvox_sel_color(\'lightyellow\', \'text\', this);" style="background-color:lightyellow;"><span class="xvox_span_visually_hidden">Ecoutez le texte avec la surbrillance jaune clair</span></button>',e+="</li>",e+='<li aria-hidden="true">',e+='<span id="text_highlight_title">Texte</span>',e+="</li>",e+="</ul>",e+="</li>",e+='<li class="xvox_text_options">',e+='<ul class="xvox_options_ul">',e+="<li>",e+='<button id="surbBoldElem" onclick="xvox_set_options(\'bold\')" title="Ecoutez le texte en l\'affichant en gras">',e+="G",e+="</button>",e+="</li>",e+="<li>",e+='<button id="surbItalElem" onclick="xvox_set_options(\'italic\')" title="Ecoutez le texte en l\'affichant en italique">',e+="I",e+="</button>",e+="</li>",e+="<li>",e+='<button id="surbUnderElem" onclick="xvox_set_options(\'underline\')" title="Ecoutez le texte en le soulignant">',e+="T",e+="</button>",e+="</li>",e+="</ul>",e+="</li>",e+="</ul>",e+="</li>",e+="<li>",e+='<button id="voxi_speed_pop" aria-expanded="false" title="Afficher les paramètres de vitesse">Vitesse</button>',e+='<ul id="voxi_speed_ul">',e+='<li class="colorSpeed">',e+='<button id="xvox_low_speed_voc" title="Vitesse de lecture lente">Lente<span class="xvox_span_visually_hidden">Vitesse de lecture lente</span></button>',e+='<button class="xvox_sel_menu" id="xvox_med_speed_voc" title="Vitesse de lecture normale">Normale<span class="xvox_span_visually_hidden">Vitesse de lecture normale</span></button>',e+='<button id="xvox_high_speed_voc" title="Vitesse de lecture rapide">Rapide<span class="xvox_span_visually_hidden">Vitesse de lecture rapide</span></button>',e+="</li>",e+="</ul>",e+="</li>",e+="<li>",e+='<button id="voxi_voice_pop" aria-expanded="false" title="Afficher les paramètres de voix">Voix</button>',e+='<ul id="voxi_voice_ul">',e+='<li class="colorSpeed">',e+='<button id="xvox_male_voice" title="Voix Masculine">Masculine<span class="xvox_span_visually_hidden">Voix Masculine</span></button>',e+='<button id="xvox_female_voice" class="xvox_sel_menu" title="Féminine">Voix Féminine<span class="xvox_span_visually_hidden">Voix Féminine</span></button>',e+="</li>",e+="</ul>",e+="</li>",e+='<li id="voxi_menu_ul_last_child">',e+='<button id="voxi_volume_pop">Volume</button>',e+='<ul id="voxi_volume_ul">',e+='<li class="colorVol">',e+='<button title="Diminuer le son de 25%" id="voxi_less_lvl" class="voxi_manage_lvl"><img src="'+vocalisation.playerImgs.vol_down+'" alt="Diminuer le son de 25%"/></button>',e+='<button title="Son Ã  25%" id="voxi_lvl1" class="voxi_lvl vol_up">&nbsp;<span class="xvox_span_visually_hidden">Son à  25%</span></button><button title="Son à  50%" id="voxi_lvl2" class="voxi_lvl vol_up">&nbsp;<span class="xvox_span_visually_hidden">Son à  50%</span></button>',e+='<button title="Son Ã  75%" id="voxi_lvl3" class="voxi_lvl vol_up">&nbsp;<span class="xvox_span_visually_hidden">Son à  75%</span></button>',e+='<button title="Son Ã  100%" id="voxi_lvl4" class="voxi_lvl vol_up">&nbsp;<span class="xvox_span_visually_hidden">Son à  100%</span></button>',e+='<button title="Augmenter le son de 25%" id="voxi_more_lvl" class="voxi_manage_lvl"><img src="'+vocalisation.playerImgs.vol_up+'" alt="Augmenter le son de 25%"/></button>',e+="</li>",e+="</ul>",e+="</li>",e+="</ul>",e+="</div>",e+="</div>",e+='<span class="vocalised_by_xvox">Vocalisé par <a target="_blank" href="http://www.xvox.fr" title="Vocalisé par XVox - nouvelle fenêtre" id="xvox_tag">XVox</a>',e+="</span>",e+="</div>",document.getElementById(vocalisation.currentPlayer).innerHTML=e}function Vocalise(){document.getElementById("mp3_src").src=vocalisation.player.source+".mp3",document.getElementById("wav_src").src=vocalisation.player.source+".wav",document.getElementById("play").onclick=function(){Voxi_Audio_Play()},document.getElementById("xvox_audio_player").load(),Voxi_Audio_Play()}function xvox_vocalise_now(e){vocalisation.indexWord=0,vocalisation.indexNew=0,vocalisation.player=e,vocalisation.currentTime=new Date,vocalisation.player.source=e.snd_url,document.getElementById("mp3_src").src=vocalisation.player.source;document.getElementById("play");document.getElementById("xvox_audio_player").load(),document.getElementById(vocalisation.currentPlayer).style.display="block",1==vocalisation.st||0==vocalisation.st&&"sent"!=vocalisation.stat?Voxi_Audio_Play():(vocalisation.onPlay=!0,document.getElementById("xvox_audio_player").play())}function Vocalise_HL(){var e=document.getElementById("vhi"),o=document.createElement("div");o.setAttribute("id","phldiv"),e.appendChild(o);var t='<a onclick="Voxi_Audio_Manage()" accesskey="L"></a>';t+='<audio id="playerHL">',t+='<source id="mp3HL_src" src="" type="audio/mpeg">',t+='<source id="wavHL_src" src="" type="audio/wav">',t+="</audio>",t+='<div id="voxi_actions_div_hl">',t+='<button id="playHL" onclick="Voxi_audio_HL_Play();" title="Ecoutez le texte sélectionné">',t+='<img id="playHL_img" src="'+vocalisation.playerImgs.play+'" alt="Ecoutez le texte sélectionné">',t+="</button>",t+='<button id="stopHL" class="btn_voxi_player" onclick="Voxi_audio_HL_Stop();" title="Arrêter l\'écoute">',t+='<img id="stopHL_img" src="'+vocalisation.playerImgs.stop+'" alt="Arrêter l\'écoute">',t+="</button>",t+='<div id="voxi_seekbar_HL">',t+='<span id="timePlayHL" style="width: 0%;">',t+="</span>",t+='<span id="timePlayHLLoaded">',t+="</span>",t+="</div>",t+='<button id="close_player_hl" onclick="Voxi_audio_HL_close();" title="Fermer le lecteur">',t+='<img src="'+vocalisation.playerImgs.narrow+'" alt="Fermer le lecteur">',t+='<span class="xvox_span_visually_hidden">Fermer le lecteur</span>',t+="</button>",t+="</div>",o.innerHTML=t,o.style.display="table";var l=document.getElementById("playerHL");l.addEventListener("timeupdate",function(){document.getElementById("timePlayHL").style.width=l.currentTime/l.duration*100+"%"}),l.addEventListener("ended",function(){Voxi_audio_HL_Stop()})}function escapeHtml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/Ãƒâ€šÃ‚Â¢/g,"&cent;").replace(/Ãƒâ€šÃ‚Â£/g,"&pound;").replace(/ÃƒÂ¢Ã¢â‚¬Å¡Ã‚Â¬/g,"&euro;").replace(/Ãƒâ€šÃ‚Â¥/g,"&yen;").replace(/Ãƒâ€šÃ‚Â°/g,"&deg;").replace(/Ãƒâ€šÃ‚Â¼/g,"&frac14;").replace(/Ãƒâ€¦Ã¢â‚¬â„¢/g,"&OElig;").replace(/Ãƒâ€šÃ‚Â½/g,"&frac12;").replace(/Ãƒâ€¦Ã¢â‚¬Å“/g,"&oelig;").replace(/Ãƒâ€šÃ‚Â¾/g,"&frac34;").replace(/Ãƒâ€¦Ã‚Â¸/g,"&Yuml;").replace(/Ãƒâ€šÃ‚Â¡/g,"&iexcl;").replace(/Ãƒâ€šÃ‚Â«/g,"&laquo;").replace(/Ãƒâ€šÃ‚Â»/g,"&raquo;").replace(/Ãƒâ€šÃ‚Â¿/g,"&iquest;").replace(/ÃƒÆ’Ã¢â€šÂ¬/g,"&Agrave;").replace(/ÃƒÆ’Ã‚Â/g,"&Aacute;").replace(/ÃƒÆ’Ã¢â‚¬Å¡/g,"&Acirc;").replace(/ÃƒÆ’Ã†â€™/g,"&Atilde;").replace(/ÃƒÆ’Ã¢â‚¬Å¾/g,"&Auml;").replace(/ÃƒÆ’Ã¢â‚¬Â¦/g,"&Aring;").replace(/ÃƒÆ’Ã¢â‚¬ /g,"&AElig;").replace(/ÃƒÆ’Ã¢â‚¬Â¡/g,"&Ccedil;").replace(/ÃƒÆ’Ã‹â€ /g,"&Egrave;").replace(/ÃƒÆ’Ã¢â‚¬Â°/g,"&Eacute;").replace(/ÃƒÆ’Ã… /g,"&Ecirc;").replace(/ÃƒÆ’Ã¢â‚¬Â¹/g,"&Euml;").replace(/ÃƒÆ’Ã…â€™/g,"&Igrave;").replace(/ÃƒÆ’Ã‚Â/g,"&Iacute;").replace(/ÃƒÆ’Ã…Â½/g,"&Icirc;").replace(/ÃƒÆ’Ã‚Â/g,"&Iuml;").replace(/ÃƒÆ’Ã‚Â/g,"&ETH;").replace(/ÃƒÆ’Ã¢â‚¬Ëœ/g,"&Ntilde;").replace(/ÃƒÆ’Ã¢â‚¬â„¢/g,"&Ograve;").replace(/ÃƒÆ’Ã¢â‚¬Å“/g,"&Oacute;").replace(/ÃƒÆ’Ã¢â‚¬Â/g,"&Ocirc;").replace(/ÃƒÆ’Ã¢â‚¬Â¢/g,"&Otilde;").replace(/ÃƒÆ’Ã¢â‚¬â€œ/g,"&Ouml;").replace(/ÃƒÆ’Ã‹Å“/g,"&Oslash;").replace(/ÃƒÆ’Ã¢â€žÂ¢/g,"&Ugrave;").replace(/ÃƒÆ’Ã…Â¡/g,"&Uacute;").replace(/ÃƒÆ’Ã¢â‚¬Âº/g,"&Ucirc;").replace(/ÃƒÆ’Ã…â€œ/g,"&Uuml;").replace(/ÃƒÆ’Ã‚Â/g,"&Yacute;").replace(/ÃƒÆ’Ã…Â¾/g,"&THORN;").replace(/ÃƒÆ’Ã…Â¸/g,"&szlig;").replace(/ÃƒÆ’ /g,"&agrave;").replace(/ÃƒÆ’Ã‚Â¡/g,"&aacute;").replace(/ÃƒÆ’Ã‚Â¢/g,"&acirc;").replace(/ÃƒÆ’Ã‚Â£/g,"&atilde;").replace(/ÃƒÆ’Ã‚Â¤/g,"&auml;").replace(/ÃƒÆ’Ã‚Â¥/g,"&aring;").replace(/ÃƒÆ’Ã‚Â¦/g,"&aelig;").replace(/ÃƒÆ’Ã‚Â§/g,"&ccedil;").replace(/ÃƒÆ’Ã‚Â¨/g,"&egrave;").replace(/ÃƒÂ©/g,"&eacute;").replace(/ÃƒÆ’Ã‚Âª/g,"&ecirc;").replace(/ÃƒÆ’Ã‚Â«/g,"&euml;").replace(/ÃƒÆ’Ã‚Â¬/g,"&igrave;").replace(/ÃƒÆ’Ã‚Â­/g,"&iacute;").replace(/ÃƒÆ’Ã‚Â®/g,"&icirc;").replace(/ÃƒÆ’Ã‚Â¯/g,"&iuml;").replace(/ÃƒÆ’Ã‚Â°/g,"&eth;").replace(/ÃƒÆ’Ã‚Â±/g,"&ntilde;").replace(/ÃƒÆ’Ã‚Â²/g,"&ograve;").replace(/ÃƒÆ’Ã‚Â³/g,"&oacute;").replace(/ÃƒÆ’Ã‚Â´/g,"&ocirc;").replace(/ÃƒÆ’Ã‚Âµ/g,"&otilde;").replace(/ÃƒÆ’Ã‚Â¶/g,"&ouml;").replace(/ÃƒÆ’Ã‚Â¸/g,"&oslash;").replace(/ÃƒÆ’Ã‚Â¹/g,"&ugrave;").replace(/ÃƒÆ’Ã‚Âº/g,"&uacute;").replace(/ÃƒÆ’Ã‚Â»/g,"&ucirc;").replace(/ÃƒÆ’Ã‚Â¼/g,"&uuml;").replace(/ÃƒÆ’Ã‚Â½/g,"&yacute;").replace(/ÃƒÆ’Ã‚Â¾/g,"&thorn;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/ÃƒÂ¢Ã¢â€šÂ¬Ã¢â€žÂ¢/g,"&#039;")}function createTabSurb(e,o){var t=o,l=0,a=0,n="",i="",s="";t=t.replace(/\xA0/g," ");for(var c=0;c<t.length;c++)if((" "==t[c]||"&nbsp;"==t[c]||"%E2%80%89"==encodeURIComponent(t[c]))&&(n=t.substr(a,c-a),i=t.substr(c,t.length-c),""!=n&&" "!=n)){if(0==a){(u=document.createElement("xvox:SPAN")).style.backgroundColor=vocalisation.wordColor,u.style.color=vocalisation.textColor,u.className="xvox_current_word_vocalised",null!=vocalisation.senOpts.fontWeight&&(u.style.fontWeight=vocalisation.senOpts.fontWeight),null!=vocalisation.senOpts.fontStyle&&(u.style.fontStyle=vocalisation.senOpts.fontStyle),null!=vocalisation.senOpts.textDecoration&&(u.style.textDecoration=vocalisation.senOpts.textDecoration),u.appendChild(document.createTextNode(n)),(_=document.createElement("xvox:SPAN")).appendChild(document.createTextNode(i));var r=document.createElement("xvox:SPAN");r.style.backgroundColor=vocalisation.color,r.style.color=vocalisation.textColor,r.className="xvox_current_sentence_vocalised",null!=vocalisation.senOpts.fontWeight&&(r.style.fontWeight=vocalisation.senOpts.fontWeight),null!=vocalisation.senOpts.fontStyle&&(r.style.fontStyle=vocalisation.senOpts.fontStyle),null!=vocalisation.senOpts.textDecoration&&(r.style.textDecoration=vocalisation.senOpts.textDecoration),r.appendChild(u),r.appendChild(_),e.push({Node:r,Word:n})}else{s=t.substr(0,a),i=t.substr(c,t.length-c),(u=document.createElement("xvox:SPAN")).appendChild(document.createTextNode(s)),(_=document.createElement("xvox:SPAN")).style.backgroundColor=vocalisation.wordColor,_.style.color=vocalisation.textColor,_.className="xvox_current_word_vocalised",null!=vocalisation.senOpts.fontWeight&&(_.style.fontWeight=vocalisation.senOpts.fontWeight),null!=vocalisation.senOpts.fontStyle&&(_.style.fontStyle=vocalisation.senOpts.fontStyle),null!=vocalisation.senOpts.textDecoration&&(_.style.textDecoration=vocalisation.senOpts.textDecoration),_.appendChild(document.createTextNode(n));var d=document.createElement("xvox:SPAN");d.appendChild(document.createTextNode(i));var v=document.createElement("xvox:SPAN");v.style.backgroundColor=vocalisation.color,v.style.color=vocalisation.textColor,v.className="xvox_current_sentence_vocalised",null!=vocalisation.senOpts.fontWeight&&(v.style.fontWeight=vocalisation.senOpts.fontWeight),null!=vocalisation.senOpts.fontStyle&&(v.style.fontStyle=vocalisation.senOpts.fontStyle),null!=vocalisation.senOpts.textDecoration&&(v.style.textDecoration=vocalisation.senOpts.textDecoration),v.appendChild(u),v.appendChild(_),v.appendChild(d),e.push({Node:v,Word:n})}l++,a=c+1}if(s=t.substr(0,a),""!=(n=t.substr(a,c-a))&&" "!=n){var u=document.createElement("xvox:SPAN");u.appendChild(document.createTextNode(s));var _=document.createElement("xvox:SPAN");_.style.backgroundColor=vocalisation.wordColor,_.style.color=vocalisation.textColor,_.className="xvox_current_word_vocalised",null!=vocalisation.senOpts.fontWeight&&(_.style.fontWeight=vocalisation.senOpts.fontWeight),null!=vocalisation.senOpts.fontStyle&&(_.style.fontStyle=vocalisation.senOpts.fontStyle),null!=vocalisation.senOpts.textDecoration&&(_.style.textDecoration=vocalisation.senOpts.textDecoration),_.appendChild(document.createTextNode(n));var x=document.createElement("xvox:SPAN");x.style.backgroundColor=vocalisation.color,x.style.color=vocalisation.textColor,x.className="xvox_current_sentence_vocalised",null!=vocalisation.senOpts.fontWeight&&(x.style.fontWeight=vocalisation.senOpts.fontWeight),null!=vocalisation.senOpts.fontStyle&&(x.style.fontStyle=vocalisation.senOpts.fontStyle),null!=vocalisation.senOpts.textDecoration&&(x.style.textDecoration=vocalisation.senOpts.textDecoration),x.appendChild(u),x.appendChild(_),e.push({Node:x,Word:n}),vocalisation.countW+=e.length}return e}function classesExceptions(e,o){for(var t=o,l=!1,a=0;a<t.length;a++)if(e.className.indexOf(t[a])>-1){l=!0;break}return l}function idExceptions(e){for(var o=["xvox_core"],t=!1,l=0;l<o.length;l++)if(e.id==o[l]){t=!0;break}return t}function charExceptions(e){for(var o=["«","»",":",";"],t=null,l=0;l<o.length;l++)e.indexOf(o[l])>-1&&(t=new RegExp(o[l],"g"),e=e.replace(t,","));return e=e.replace(/\(/g,","),e=e.replace(/\)/g,",")}function xvox_style_exceptions(e){var o=["bookmark-button","popupInfo","partagerButton"],t=!0;if("string"==typeof e.className&&classesExceptions(e,o))t=!0;else if(void 0!==e.style){var l=window.getComputedStyle(e,null).getPropertyValue("display");"none"!=l&&"none!important"!=l||(t=!1)}return t}function find_nodes(e){var o,t=[],l=0,a="",n=/^\s*$/,i=e.childNodes,s=i.length,c="",r=[],d=[":","-",","],v=new RegExp(".{0,}?(?:\\.|!|\\?)(?:(?=\\ [a-zA-Z0-9])|$)","g"),u=!0,_=["xvox_voc","xvox_skip"];if((u=xvox_style_exceptions(e))&&("string"==typeof e.className&&0==classesExceptions(e,_)||"string"!=typeof e.className)&&0==idExceptions(e)&&(e.hasAttribute("type")&&"text/javascript"!=e.getAttribute("type")||!e.hasAttribute("type")&&"SCRIPT"!=e.tagName))for(var x=0;x<s;x++)if(u=xvox_style_exceptions(i[x]),i[x].hasChildNodes()&&u)find_nodes(i[x]);else if(i[x]&&u){a=i[x].textContent||i[x].innerText||"";var p=encodeURIComponent(a);if(p=p.replace(/%C2%A0/g," "),a=decodeURIComponent(p),"IMG"==i[x].nodeName&&(a=i[x].alt),!n.test(a)&&8!=i[x].nodeType){for(l=0,c=a=a.trim(),r=[];null!=(o=v.exec(a));)o.index===v.lastIndex&&++v.lastIndex,r.push(o[0]),c=c.substring(o[0].length),l++;if(c.length>0&&"."!=c&&r.push(c),0==l)i[x]&&(a.trim().length<2?-1==d.indexOf(a.trim())&&"%E2%96%A0"!=encodeURIComponent(a.trim())&&(t=createTabSurb(t=[],a),vocalisation.sentences.push({Node:i[x].parentNode,Son:i[x],Text:a,ClonedNode:i[x].cloneNode(!0),Num:x,Words:t}),"sent"!=vocalisation.stat&&(vocalisation.content+=a+" ")):"**"!=a&&"***"!=a&&(t=createTabSurb(t=[],a=a.trim()),vocalisation.sentences.push({Node:i[x].parentNode,Son:i[x],Text:a,ClonedNode:i[x].cloneNode(!0),Num:x,Words:t}),"sent"!=vocalisation.stat&&(vocalisation.content+=a+" ")));else if(1==r.length&&"."!=r[0]&&","!=r[0])t=[],r[0]=r[0].replace(/\u00a0/g,""),t=createTabSurb(t,r[0]),vocalisation.sentences.push({Node:i[x].parentNode,Son:i[x],Text:r[0],ClonedNode:i[x].cloneNode(!0),Num:0,Words:t}),"sent"!=vocalisation.stat&&(vocalisation.content+=r[0]+" ");else if(r.length>1){var m=document.createElement("SPAN");i[x].parentNode.replaceChild(m,i[x]);for(var y=0;y<r.length;y++){var g=document.createTextNode(r[y]);m.appendChild(g),t=createTabSurb(t=[],r[y]),vocalisation.sentences.push({Node:m,Son:g,Text:r[y],ClonedNode:g.cloneNode(!0),Num:y,Words:t}),"sent"!=vocalisation.stat&&(vocalisation.content+=r[y]+" ")}}}}}function spliceText(e){for(var o=document.getElementById(vocalisation.idContent).childNodes,t=o.length,l=0;l<t;l++)o[l]&&o[l].hasChildNodes()&&find_nodes(o[l]);var a=vocalisation.sentences.length,n=0,i=[];i[n]=[];for(var s=0;s<a;s++)i[n]=[],i[n].push(vocalisation.sentences[s]),n++;vocalisation.liveVocTab=i}function display_hl(e){var o=document.getElementById("playerHL");document.getElementById("timePlayHLLoaded").style.display="none",document.getElementById("timePlayHL").style.display="block",document.getElementById("mp3HL_src").src=e.snd_url,o.pause(),0!=o.currentTime&&(o.currentTime=0),o.load(),Voxi_audio_HL_Play()}function xvox_get_audio_duration(e){var o=document.createElement("audio");o.setAttribute("id","XVOXaudioTMP");var t=e.source;t=(t=(t=t.replace("http://","")).replace("https://","")).replace(t.substr(0,t.indexOf("/")),vocalisation.currentProtocol+vocalisation.SERVER_URL),o.setAttribute("src",t+".mp3"),document.getElementsByTagName("body")[0].appendChild(o);var l=document.getElementById("XVOXaudioTMP");l.addEventListener("loadedmetadata",function(e){vocalisation.totalSoundDurationReal+=l.duration,vocalisation.totalSoundDurationReal>vocalisation.totalSoundDuration&&(vocalisation.totalSoundDuration=vocalisation.totalSoundDurationReal),document.getElementsByTagName("body")[0].removeChild(l)})}function xvox_acapela_parse_words_file(e){console.log(e);for(var o=e.split("\n"),t=[],l=0;l<o.length;l++){var a=o[l].indexOf("="),n=o[l].indexOf("/"),i=o[l].length,s=parseInt(o[l].substr(0,a))/1e3+.053,c=(parseInt(o[l].substr(a+1,n-(a+1))),parseInt(o[l].substr(n+1,i-(n+1))));isNaN(s)||t.push({posSound:s,offset:c})}if(t.length>0){vocalisation.silences.push(t);var r=vocalisation.silences.length-1,d=0,v=0,u=0,_=0,x=0,p=0;if(vocalisation.silences[r].length!=vocalisation.sentences[r].Words.length){console.log("REGROUPEMENT DE MOTS"),console.log("Sequence "+r);for(var m=0,y=vocalisation.sentences[r].Words.length;m<y;)m<vocalisation.silences[r].length-1&&(d=0,d=vocalisation.silences[r][m+1].offset-vocalisation.silences[r][m].offset-1,vocalisation.sentences[r].Words[m].Word.length!=d&&(console.log("MOT DIFFERENT -> "+vocalisation.sentences[r].Words[m].Word),v=0,u=0,_=0,p=0,v=vocalisation.silences[r][m].posSound,_=(u=vocalisation.silences[r][m+1].posSound)-(u-v)/2,x=d-vocalisation.sentences[r].Words[m].Word.length-1,p=vocalisation.silences[r][m].offset+x+1,vocalisation.silences[r].splice(m+1,0,{posSound:_,offset:p}),m++)),m++}vocalisation.sequenceNumber++}}function xvox_acapela_get_words_live(e,o){var t=getXmlHttpRequest(),l=e.wp_url;t.open("GET",l,!0),vocalisation.xvox_requests.push(t),t.onload=function(){xvox_acapela_parse_words_file(t.responseText),vocalisation.player.source=e.snd_url,document.getElementById("voxi_actions_div").style.display="block",document.getElementById("voxi_error_div").style.display="none",document.getElementById("voxi_loaded").style.display="none",document.getElementById("voxi_time_play").style.display="block",vocalisation.globalTabLive<vocalisation.liveVocTab.length&&vocalisation.isStopped&&(document.getElementById("voxi_loaded").style.display="none",document.getElementById("voxi_time_play").style.display="block",vocalisation.lastIndexSilence=vocalisation.index_silence,vocalisation.totalPause=0,vocalisation.timePause=null,vocalisation.Resume=null,vocalisation.currentTime=null,vocalisation.onPlay=!1,vocalisation.isStopped=!1,xvox_vocalise_now(vocalisation.tabLives[vocalisation.tabLivesIndex-1])),vocalisation.lastIndexSilence=vocalisation.index_silence,vocalisation.tabLives.push(e),++vocalisation.liveVocIndex<o&&xvox_rec_live()},t.send()}function xvox_acapela_get_words(e,o){var t=getXmlHttpRequest(),l=e.wp_url;t.open("GET",l,!0),vocalisation.xvox_requests.push(t),t.onload=function(){xvox_acapela_parse_words_file(t.responseText),document.getElementById("voxi_error_div").style.display="none",document.getElementById("voxi_actions_div").style.display="block",vocalisation.player.source=e.snd_url,document.getElementById("voxi_loaded").style.display="none",vocalisation.tabLives=[],vocalisation.tabLives.push(e),vocalisation.tabLivesIndex++,xvox_vocalise_now(e),++vocalisation.liveVocIndex<o&&xvox_rec_live()},t.send()}function xvox_rec_live(){var e=null,o=vocalisation.sentences.length;e=charExceptions(e=(e=vocalisation.sentences[vocalisation.liveVocIndex].Text).replace(/\s+/g," "));var t=window.location.href;t.indexOf("http://www.")>-1?t=t.replace("http://www.",""):t.indexOf("http://")>-1?t=t.replace("http://",""):t.indexOf("www.")>-1&&(t=t.replace("www.",""));var l=getXmlHttpRequest();vocalisation.ieRequest&&(console.log("IE REQUEST"),l.onprogress=function(){console.log("PROGRESS")},l.ontimeout=function(){console.log("TIMEOUT")},l.onerror=function(){console.log("ERROR")}),l.onload=function(){console.log(l.responseText);var e=l.responseText;void 0!==(e=xvox_acapela_object_handler(e)).wp_url?xvox_acapela_get_words_live(e,o):(vocalisation.player.source=e.snd_url,document.getElementById("voxi_actions_div").style.display="block",document.getElementById("voxi_error_div").style.display="none",document.getElementById("voxi_loaded").style.display="none",document.getElementById("voxi_time_play").style.display="block",vocalisation.globalTabLive<vocalisation.liveVocTab.length&&vocalisation.isStopped&&(document.getElementById("voxi_loaded").style.display="none",document.getElementById("voxi_time_play").style.display="block",vocalisation.lastIndexSilence=vocalisation.index_silence,vocalisation.totalPause=0,vocalisation.timePause=null,vocalisation.Resume=null,vocalisation.currentTime=null,vocalisation.onPlay=!1,vocalisation.isStopped=!1,xvox_vocalise_now(vocalisation.tabLives[vocalisation.tabLivesIndex-1])),vocalisation.lastIndexSilence=vocalisation.index_silence,vocalisation.tabLives.push(e),++vocalisation.liveVocIndex<o&&xvox_rec_live())};var a="https://vaas.acapela-group.com/Services/UrlMaker.json?prot_vers=2&cl_login=EVAL_VAAS&cl_app=EVAL_2087223&cl_pwd=4dk855b0&req_voice="+vocalisation.voice+"&req_spd="+vocalisation.rate+"&req_wp=ON&req_text="+encodeURIComponent(e);l.open("GET",a,!0),vocalisation.xvox_requests.push(l),l.send()}function xvox_live_voc(e){for(var o=0,t=0;t<vocalisation.sentences.length;t++)o+=vocalisation.sentences[t].Words.length;vocalisation.totalSoundDuration=.38415*o;var l=null,a=vocalisation.sentences.length;vocalisation.liveVocIndex=0,l=charExceptions(l=(l=vocalisation.sentences[vocalisation.liveVocIndex].Text).replace(/\s+/g," "));var n=window.location.href;n.indexOf("http://www.")>-1?n=n.replace("http://www.",""):n.indexOf("http://")>-1?n=n.replace("http://",""):n.indexOf("www.")>-1&&(n=n.replace("www.",""));var i=getXmlHttpRequest(),s="https://vaas.acapela-group.com/Services/UrlMaker.json?prot_vers=2&cl_login=EVAL_VAAS&cl_app=EVAL_2087223&cl_pwd=4dk855b0&req_voice="+vocalisation.voice+"&req_spd="+vocalisation.rate+"&req_wp=ON&req_text="+encodeURIComponent(l);i.open("GET",s,!0),vocalisation.xvox_requests.push(i),vocalisation.ieRequest&&(console.log("IE REQUEST"),i.onprogress=function(){console.log("PROGRESS")},i.ontimeout=function(){console.log("TIMEOUT")},i.onerror=function(){console.log("ERROR")}),i.onload=function(){console.log(i.responseText);var e=i.responseText;void 0!==(e=xvox_acapela_object_handler(e)).wp_url?xvox_acapela_get_words(e,a):(document.getElementById("voxi_error_div").style.display="none",document.getElementById("voxi_actions_div").style.display="block",vocalisation.player.source=e.snd_url,document.getElementById("voxi_loaded").style.display="none",vocalisation.tabLives=[],vocalisation.tabLives.push(e),vocalisation.tabLivesIndex++,xvox_vocalise_now(e),++vocalisation.liveVocIndex<a&&xvox_rec_live())},i.send()}function vocHighlight(e){var o,t,l=document.getElementById("vhi"),a=document.getElementById("phldiv");null!=l&&"none"==l.style.display||null==l?(o=e.clientX+"px",t=e.clientY-50+"px"):null!=l&&(o=l.style.left,t=l.style.top);var n;window.getSelection?n=window.getSelection():document.selection&&(n=document.selection.createRange());var i=n;if(n.text&&(i=n.text),""!=i)if(null==l){document.getElementById(vocalisation.idContent);var s=document.createElement("div");s.setAttribute("id","vhi"),s.style.cssText="position:fixed;top:"+t+";left:"+o+";z-index:2147483638;",document.body.appendChild(s);var c='<div id="btn_voc_hig" style="float:left;">';c+='<button id="vocHigh" title="Ecouter le texte" style="padding: 0px;background: none;border: none;">',c+='<img id="xvox_hl_listen_img" src="'+vocalisation.playerImgs.listen_hl+'" alt="Ecoutez le texte" />',c+='<img id="xvox_hl_arrow_img" src="'+vocalisation.playerImgs.listen_arrow_hl+'" alt="Ecoutez le texte" />',c+="</button>",c+="</div>",s.innerHTML=c,document.getElementById("vocHigh").onclick=function(){var e=window.location.href;e.indexOf("http://www.")>-1?e=e.replace("http://www.",""):e.indexOf("http://")>-1?e=e.replace("http://",""):e.indexOf("www.")>-1&&(e=e.replace("www.",""));var o=getXmlHttpRequest(),t="https://vaas.acapela-group.com/Services/UrlMaker.json?prot_vers=2&cl_login=EVAL_VAAS&cl_app=EVAL_2087223&cl_pwd=4dk855b0&req_voice="+vocalisation.voice+"&req_spd="+vocalisation.rate+"&req_wp=ON&req_text="+encodeURIComponent(i.toString());o.open("GET",t,!0),vocalisation.xvox_requests.push(o),vocalisation.ieRequest?(o.onprogress=function(){console.log("PROGRESS")},o.ontimeout=function(){console.log("TIMEOUT")},o.onerror=function(){console.log("ERROR")},o.onload=function(){var e=o.responseText;display_hl(e=xvox_acapela_object_handler(e)),document.getElementById("phldiv").style.display="table"}):o.onload=function(){var e=o.responseText;display_hl(e=xvox_acapela_object_handler(e)),document.getElementById("phldiv").style.display="table"},null==document.getElementById("phldiv")?Vocalise_HL():null!=document.getElementById("phldiv")&&(document.getElementById("phldiv").style.display="table"),document.getElementById("timePlayHL").style.display="none",document.getElementById("timePlayHLLoaded").style.display="block",vocalisation.ieRequest,o.send()}}else l.style.cssText="display:block;position:fixed;top:"+t+";left:"+o+";z-index:2147483638;",document.getElementById("btn_voc_hig").style.display="block";else null!=l&&(null==a||null!=a&&"none"==a.style.display)&&(l.style.display="none")}function send_stat(){var e=window.location.href;e.indexOf("http://www.")>-1?e=e.replace("http://www.",""):e.indexOf("http://")>-1?e=e.replace("http://",""):e.indexOf("www.")>-1&&(e=e.replace("www.",""));var o=getXmlHttpRequest();vocalisation.ieRequest?(o.onprogress=function(){console.log("PROGRESS")},o.ontimeout=function(){console.log("TIMEOUT")},o.onerror=function(){console.log("ERROR")},o.onload=function(){"L'utilisateur n'existe pas!"==o.responseText&&console.log("STAT_ERR")}):o.onload=function(){"L'utilisateur n'existe pas!"==o.responseText&&console.log("STAT_ERR")}}function init_events(){var e=document.getElementById("xvox_audio_player");vocalisation.vocal;vocalisation.savedNode=0,vocalisation.audio=e,vocalisation.wordNum=vocalisation.sentences[vocalisation.index_silence].Words.length,e.addEventListener("ended",function(){vocalisation.indexWord=0,vocalisation.globalTabLive++,vocalisation.tabLivesIndex<vocalisation.tabLives.length?(vocalisation.lastIndexSilence=vocalisation.index_silence,vocalisation.totalPause=0,vocalisation.timePause=null,vocalisation.Resume=null,vocalisation.currentTime=null,vocalisation.ctime+=e.duration,vocalisation.onPlay=!1,xvox_vocalise_now(vocalisation.tabLives[vocalisation.tabLivesIndex]),vocalisation.tabLivesIndex++):vocalisation.tabLivesIndex>=vocalisation.tabLives.length&&vocalisation.globalTabLive>=vocalisation.liveVocTab.length?(Voxi_Audio_Stop(),vocalisation.isStopped=!1):vocalisation.tabLivesIndex>=vocalisation.tabLives.length&&vocalisation.globalTabLive<vocalisation.liveVocTab.length&&(vocalisation.isStopped=!0,vocalisation.ctime+=e.duration,document.getElementById("voxi_loaded").style.display="block",document.getElementById("voxi_time_play").style.display="none")});for(var o=document.getElementById("play"),t=document.getElementById("stop"),l=document.getElementById("engine"),a=document.getElementById("close_player"),n=document.getElementById("voxi_highlight_pop"),i=document.getElementById("voxi_speed_pop"),s=document.getElementById("voxi_voice_pop"),c=document.getElementById("voxi_volume_pop"),r=document.getElementById("voxi_less_lvl"),d=document.getElementById("voxi_more_lvl"),v=document.getElementById("xvox_high_speed_voc"),u=document.getElementById("xvox_med_speed_voc"),_=document.getElementById("xvox_low_speed_voc"),x=document.getElementById("xvox_male_voice"),p=document.getElementById("xvox_female_voice"),m=[.25,.5,.75,1],y=0;y<4;y++){h=1;document.getElementById("voxi_lvl"+(y+1)).onclick=function(){var o=this.id.replace("voxi_lvl","");if(h=m[o-1],e.volume<h)for(t=0;m[t]<=h;t++)xvox_has_class(g=document.getElementById("voxi_lvl"+(t+1)),"vol_down")&&xvox_remove_class_name(g,"vol_down"),xvox_has_class(g,"vol_up")||(g.className+=" vol_up");else if(e.volume>h)for(var t=m.length-1;m[t]>h;t--)xvox_has_class(g=document.getElementById("voxi_lvl"+(t+1)),"vol_up")&&xvox_remove_class_name(g,"vol_up"),xvox_has_class(g,"vol_down")||(g.className+=" vol_down");e.volume=h}}o.onclick=function(){Voxi_Audio_Play()},t.onclick=function(){Voxi_Audio_Stop()},l.onclick=function(){xvox_show_menu_player(),document.getElementById("voxi_highlight_ul").style.display="none",document.getElementById("voxi_speed_ul").style.display="none",document.getElementById("voxi_voice_ul").style.display="none",document.getElementById("voxi_volume_ul").style.display="none"},a.onclick=function(){document.getElementById("engine").setAttribute("aria-expanded","false"),document.getElementById("engine").setAttribute("title","Afficher les paramètres"),Voxi_Audio_Stop(),document.getElementById("xvox_player").style.display="none",document.getElementById("xvox_listen_link").style.display="block"},n.onclick=function(){xvox_show_highlight_menu()},i.onclick=function(){xvox_show_speed_menu()},s.onclick=function(){xvox_show_voice_menu()},_.onclick=function(){xvox_has_class(v,"xvox_sel_menu")&&xvox_remove_class_name(v,"xvox_sel_menu"),xvox_has_class(u,"xvox_sel_menu")&&xvox_remove_class_name(u,"xvox_sel_menu"),_.className+="xvox_sel_menu",Voxi_Audio_Stop(),document.getElementById("voxi_loaded").style.display="block",vocalisation.rate=110,Voxi_Audio_Play()},u.onclick=function(){xvox_has_class(_,"xvox_sel_menu")&&xvox_remove_class_name(_,"xvox_sel_menu"),xvox_has_class(v,"xvox_sel_menu")&&xvox_remove_class_name(v,"xvox_sel_menu"),u.className+="xvox_sel_menu",Voxi_Audio_Stop(),document.getElementById("voxi_loaded").style.display="block",vocalisation.rate=180,Voxi_Audio_Play()},v.onclick=function(){xvox_has_class(_,"xvox_sel_menu")&&xvox_remove_class_name(_,"xvox_sel_menu"),xvox_has_class(u,"xvox_sel_menu")&&xvox_remove_class_name(u,"xvox_sel_menu"),v.className+="xvox_sel_menu",Voxi_Audio_Stop(),document.getElementById("voxi_loaded").style.display="block",vocalisation.rate=220,Voxi_Audio_Play()},x.onclick=function(){xvox_has_class(p,"xvox_sel_menu")&&xvox_remove_class_name(p,"xvox_sel_menu"),x.className+="xvox_sel_menu",Voxi_Audio_Stop(),document.getElementById("voxi_loaded").style.display="block",vocalisation.voice="antoinehappy22k",Voxi_Audio_Play()},p.onclick=function(){xvox_has_class(x,"xvox_sel_menu")&&xvox_remove_class_name(x,"xvox_sel_menu"),p.className+="xvox_sel_menu",Voxi_Audio_Stop(),document.getElementById("voxi_loaded").style.display="block",vocalisation.voice="margauxhappy22k",Voxi_Audio_Play()},c.onclick=function(){xvox_show_volume_menu()},r.onclick=function(){if(e.volume>m[0]){var o;for(o=0;m[o]<e.volume;o++);var t=document.getElementById("voxi_lvl"+(o+1));xvox_has_class(t,"vol_up")&&xvox_remove_class_name(t,"vol_up"),xvox_has_class(t,"vol_down")||(t.className+=" vol_down"),e.volume=m[o-1]}},d.onclick=function(){if(e.volume<m[m.length-1]){var o;for(o=0;m[o]<e.volume;o++);var t=document.getElementById("voxi_lvl"+(o+2));xvox_has_class(t,"vol_down")&&xvox_remove_class_name(t,"vol_down"),xvox_has_class(t,"vol_up")||(t.className+=" vol_up"),e.volume=m[o+1]}};for(var g,m=[.25,.5,.75,1],h=1,b=0;b<m.length;b++)h>=m[b]&&(xvox_remove_class_name(g=document.getElementById("voxi_lvl"+(b+1)),"vol_down"),g.className+=" vol_up")}function vocalisePDF(){var e=window.location.host;e.indexOf("http://www.")>-1?e=e.replace("http://www.",""):e.indexOf("http://")>-1?e=e.replace("http://",""):e.indexOf("www.")>-1&&(e=e.replace("www.","")),e.indexOf("https://www.")>-1?e=e.replace("https://www.",""):e.indexOf("https://")>-1?e=e.replace("https://",""):e.indexOf("www.")>-1&&(e=e.replace("www.",""));for(var o=document.getElementsByClassName("static_pdf"),t=0;t<o.length;t++)if("pdf"==(s=o[t].href.substring(o[t].href.lastIndexOf(".")+1,o[t].href.length))){var l=document.createElement("a");l.href="https://core.xvox.fr/readPDF/"+e+"/"+encodeURIComponent(o[t].href),l.target="_blank",(r=document.createElement("IMG")).src=vocalisation.playerImgs.pdf_icon,r.style.width="16px",r.style.height="16px",r.className+="xvox_valign",l.appendChild(r),l.style.marginRight="4px",l.style.marginTop="-2px",l.style.width="16px",l.style.height="16px",(d=o[t]).parentNode.insertBefore(l,d)}for(var a=document.getElementsByClassName("dynamic_pdf"),n=0;n<a.length;n++){var i=a[n].getAttribute("xvox_url"),s=i.substring(i.lastIndexOf(".")+1,i.length);if("pdf"==s){var c=document.createElement("a");c.href="https://core.xvox.fr/readPDF/"+e+"/"+encodeURIComponent(i),c.target="_blank";var r=document.createElement("IMG");r.src=vocalisation.playerImgs.pdf_icon,r.style.width="16px",r.style.height="16px",r.className+="xvox_valign",c.appendChild(r),c.style.marginRight="4px",c.style.marginTop="-2px",c.style.width="16px",c.style.height="16px";var d=a[n];d.parentNode.insertBefore(c,d)}}}function xvox_class_present(e,o){var t,l=!1;for(t=0;t<e.length;t++)e[t]===o&&(l=!0);return l}function xvox_parse_url(e){var o=document.createElement("a");o.href=e;var t,l,a={},n=o.search.replace(/^\?/,"").split("&");for(l=0;l<n.length;l++)a[(t=n[l].split("="))[0]]=t[1];return{protocol:o.protocol,host:o.host,hostname:o.hostname,port:o.port,pathname:o.pathname,search:o.search,searchObject:a,hash:o.hash}}function xvox_acapela_object_handler(e){return cstr=JSON.parse(e),cstr}function document_loaded(){var e=document.getElementById("xvox_listen_link");if(void 0!==e&&null!=e){var o=xvox_parse_url(decodeURIComponent(e.href));vocalisation.lang=o.searchObject.language,vocalisation.voice=o.searchObject.voice,vocalisation.idContent=o.searchObject.idContent,vocalisation.currentPlayer=o.searchObject.idPlayer,vocalisation.vocal=document.getElementById(vocalisation.idContent),init_player(),document.getElementById("xvox_listen_link").addEventListener("click",function(e){e.preventDefault(),null!=document.getElementById(vocalisation.idContent)&&(""==vocalisation.stat?(spliceText(),init_events(),document.getElementById("voxi_error_msg").innerHTML=vocalisation.errorMessage,document.getElementById(vocalisation.currentPlayer).style.display="block",document.getElementById("voxi_loaded").style.display="block",xvox_live_voc("hybvoc")):(document.getElementById("voxi_error_msg").innerHTML=vocalisation.errorMessage,document.getElementById(vocalisation.currentPlayer).style.display="block",document.getElementById("voxi_loaded").style.display="block",xvox_live_voc("hybvoc")))})}}function crossBrowserAddEvent(e,o,t){return e.addEventListener?(e.addEventListener(o,t,!1),!0):!!e.attachEvent&&e.attachEvent("on"+o,t)}var vocalisation={SERVER_URL:"core.xvox.fr",currentProtocol:"https://",player:"",lang:"fr-FR",voice:"margauxhappy22k",idContent:null,errorMessage:"Une erreur est survenue, veuillez réessayer...",playerImgs:{play:"https://core.xvox.fr/customer_area/imgs/Player/Generic/play.png",pause:"https://core.xvox.fr/customer_area/imgs/Player/Generic/pause.png",stop:"https://core.xvox.fr/customer_area/imgs/Player/Generic/stop.png",engine:"https://core.xvox.fr/customer_area/imgs/Player/Generic/engine.png",narrow:"https://core.xvox.fr/customer_area/imgs/Player/Generic/narrow.png",play_hover:"https://core.xvox.fr/customer_area/imgs/Player/Generic/play_hover.png",pause_hover:"https://core.xvox.fr/customer_area/imgs/Player/Generic/pause_hover.png",stop_hover:"https://core.xvox.fr/customer_area/imgs/Player/Generic/stop_hover.png",engine_hover:"https://core.xvox.fr/customer_area/imgs/Player/Generic/engine_hover.png",listen:"https://core.xvox.fr/customer_area/imgs/Player/xvox_listen_btn.png",vol_down:"https://core.xvox.fr/customer_area/imgs/Player/vol_less.png",vol_up:"https://core.xvox.fr/customer_area/imgs/Player/vol_up.png",listen_hl:"https://core.xvox.fr/customer_area/imgs/Player/Generic/xvox_listen_btn_hl.png",listen_arrow_hl:"https://core.xvox.fr/customer_area/imgs/Player/Generic/xvox_listen_arrow.png",pdf_icon:"https://core.xvox.fr/customer_area/imgs/Player/Generic/xvox_pdf_icon.png"},content:"",sentences:[],index_silence:0,indexWord:0,indexNew:0,nextNode:!1,wordColor:"#313131",wordColorDescription:"Noir",vocal:"",stat:"",onPlay:!1,speed:"normal",color:"#3a6c97",colorDescription:"Bleu",textColor:"white",countW:0,wordNum:0,savedNode:0,st:!1,voiceType:"fem",currentSenColored:null,currentWorColored:null,currentTexColored:null,senOpts:{fontWeight:"normal",fontStyle:"normal",textDecoration:"none"},audio:null,timeUpdate:-1,currentTime:null,inPause:!1,timePause:null,Resume:null,totalPause:0,liveVocTab:[],liveVocIndex:0,tabLives:[],tabLivesIndex:0,globalTabLive:0,isStopped:!1,totalSoundDuration:0,ctime:0,totalSoundDurationReal:0,lastIndexSilence:0,cacheMode:!1,raz:!1,ieRequest:!1,currentRouteHL:"hl",lastNodeOpen:null,defaultAudioFileSrc:"http://xvox.fr/misc/sample",vocaliseSentence:!0,vocaliseWord:!0,rate:180,intervalTick:100,silences:[],sequenceNumber:0,fullStopped:!1,xvox_requests:[],savedSentenceColor:null,savedWordColor:null,savedTextColor:null};crossBrowserAddEvent(window,"DOMContentLoaded",document_loaded),document.onmouseup=vocHighlight,document.all||document.captureEvents(Event.MOUSEUP);